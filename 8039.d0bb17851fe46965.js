"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8039],{8039:(G,p,g)=>{g.r(p),g.d(p,{MyBiddingPageModule:()=>D});var s=g(6895),y=g(4006),d=g(3497),l=g(2485),f=g(6498),a=g(5439),m=g(1158),n=g(6738),b=g(849),x=g(4338);function T(i,e){if(1&i){const t=n.EpF();n.TgZ(0,"ion-grid",5)(1,"ion-row",6)(2,"ion-col",7)(3,"h3"),n._uU(4,"\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644"),n.qZA()(),n.TgZ(5,"ion-col",8)(6,"ion-button",9),n.NdJ("click",function(){n.CHM(t);const r=n.oxw();return n.KtG(r.reload())}),n.TgZ(7,"h5"),n._uU(8,"\u062a\u062d\u062f\u064a\u062b"),n.qZA(),n._UZ(9,"ion-icon",10),n.qZA()()()()}}function S(i,e){1&i&&(n.TgZ(0,"ion-grid",5)(1,"ion-row",11)(2,"ion-col",7),n._UZ(3,"ion-spinner",12),n.qZA(),n._UZ(4,"ion-col",13),n.qZA()())}function M(i,e){1&i&&(n.TgZ(0,"ion-badge",33)(1,"ion-text"),n._uU(2," \u0645\u0632\u0627\u062f \u0642\u0627\u062f\u0645"),n.qZA(),n._UZ(3,"ion-icon",34),n.qZA())}function P(i,e){1&i&&(n.TgZ(0,"ion-badge",35)(1,"ion-text"),n._uU(2," \u0645\u0632\u0627\u062f \u0645\u0646\u062a\u0647\u064a "),n.qZA(),n._UZ(3,"ion-icon",34),n.qZA())}function U(i,e){1&i&&(n.TgZ(0,"ion-badge",36)(1,"ion-text"),n._uU(2," \u0645\u0632\u0627\u062f \u062c\u0627\u0631\u064a"),n.qZA(),n._UZ(3,"ion-icon",34),n.qZA())}function w(i,e){1&i&&(n.TgZ(0,"div",37)(1,"ion-badge",38),n._UZ(2,"ion-icon",39),n.TgZ(3,"ion-text"),n._uU(4," \u0645\u0634\u0627\u0631\u0643 "),n.qZA()()())}function I(i,e){1&i&&(n.TgZ(0,"div",37)(1,"ion-badge",38),n._UZ(2,"ion-icon",40),n.TgZ(3,"ion-text"),n._uU(4," \u0641\u0627\u0626\u0632 "),n.qZA()()())}function B(i,e){1&i&&(n.TgZ(0,"div",37)(1,"ion-badge",38),n._UZ(2,"ion-icon",41),n.TgZ(3,"ion-text"),n._uU(4," \u0645\u0644\u063a\u064a "),n.qZA()()())}function q(i,e){if(1&i&&(n.TgZ(0,"b"),n._uU(1),n.qZA()),2&i){const t=n.oxw().ngIf;n.xp6(1),n.hij("",t.da," :")}}function v(i,e){1&i&&(n.TgZ(0,"b"),n._uU(1,"00 :"),n.qZA())}function O(i,e){if(1&i&&(n.TgZ(0,"b"),n._uU(1),n.qZA()),2&i){const t=n.oxw().ngIf;n.xp6(1),n.hij("",t.hr," :")}}function N(i,e){1&i&&(n.TgZ(0,"b"),n._uU(1,"00 :"),n.qZA())}function J(i,e){if(1&i&&(n.TgZ(0,"b"),n._uU(1),n.qZA()),2&i){const t=n.oxw().ngIf;n.xp6(1),n.hij("",t.mn," :")}}function Y(i,e){1&i&&(n.TgZ(0,"b"),n._uU(1,"00 :"),n.qZA())}function F(i,e){if(1&i&&(n.TgZ(0,"b"),n._uU(1),n.qZA()),2&i){const t=n.oxw().ngIf;n.xp6(1),n.Oqu(t.sc)}}function C(i,e){1&i&&(n.TgZ(0,"b"),n._uU(1,"00"),n.qZA())}function E(i,e){if(1&i&&(n.TgZ(0,"ion-row")(1,"ion-col",42)(2,"h6",43)(3,"ion-text"),n._uU(4,"\u064a\u0648\u0645 : "),n.qZA(),n.TgZ(5,"ion-text"),n._uU(6,"\u0633\u0627\u0639\u0629 : "),n.qZA(),n.TgZ(7,"ion-text"),n._uU(8,"\u062f\u0642\u064a\u0642\u0629 : "),n.qZA(),n.TgZ(9,"ion-text"),n._uU(10,"\u062b\u0627\u0646\u064a\u0629 "),n.qZA()(),n.TgZ(11,"h6",44)(12,"ion-text",27),n.YNc(13,q,2,1,"b",4),n.YNc(14,v,2,0,"b",4),n.qZA(),n.TgZ(15,"ion-text",27),n.YNc(16,O,2,1,"b",4),n.YNc(17,N,2,0,"b",4),n.qZA(),n.TgZ(18,"ion-text",27),n.YNc(19,J,2,1,"b",4),n.YNc(20,Y,2,0,"b",4),n.qZA(),n.TgZ(21,"ion-text",27),n.YNc(22,F,2,1,"b",4),n.YNc(23,C,2,0,"b",4),n.qZA()()()()),2&i){const t=n.oxw().$implicit;n.xp6(13),n.Q6J("ngIf",t.currentStatus<3),n.xp6(1),n.Q6J("ngIf",3==t.currentStatus),n.xp6(2),n.Q6J("ngIf",t.currentStatus<3),n.xp6(1),n.Q6J("ngIf",3==t.currentStatus),n.xp6(2),n.Q6J("ngIf",t.currentStatus<3),n.xp6(1),n.Q6J("ngIf",3==t.currentStatus),n.xp6(2),n.Q6J("ngIf",t.currentStatus<3),n.xp6(1),n.Q6J("ngIf",3==t.currentStatus)}}function Q(i,e){if(1&i){const t=n.EpF();n.TgZ(0,"ion-col",16)(1,"ion-grid",17)(2,"ion-row")(3,"ion-item",18),n.YNc(4,M,4,0,"ion-badge",19),n.YNc(5,P,4,0,"ion-badge",20),n.YNc(6,U,4,0,"ion-badge",21),n.TgZ(7,"ion-label"),n._uU(8),n.qZA()()(),n.TgZ(9,"ion-row")(10,"ion-col",22),n.YNc(11,w,5,0,"div",23),n.YNc(12,I,5,0,"div",23),n.YNc(13,B,5,0,"div",23),n._UZ(14,"img",24),n.qZA(),n.TgZ(15,"ion-col",25)(16,"ion-grid",17)(17,"ion-row",26)(18,"ion-label")(19,"ion-text",27)(20,"b"),n._uU(21," \u064a\u0628\u062f\u0623 \u0645\u0646 :"),n.qZA()(),n.TgZ(22,"ion-text"),n._uU(23),n.qZA()()(),n.TgZ(24,"ion-row",26)(25,"ion-label")(26,"ion-text",27)(27,"b"),n._uU(28,"\u0627\u0644\u0639\u0631\u0628\u0648\u0646 :"),n.qZA()(),n.TgZ(29,"ion-text"),n._uU(30),n.qZA()()(),n.TgZ(31,"ion-row",26)(32,"ion-label")(33,"ion-text"),n._uU(34),n.ALo(35,"date"),n.qZA()(),n.TgZ(36,"ion-label",28)(37,"ion-text",29),n._uU(38),n.ALo(39,"date"),n.qZA()()(),n.TgZ(40,"ion-row",26)(41,"ion-label")(42,"ion-text",27)(43,"b"),n._uU(44,"\u0627\u0644\u0645\u062f\u0629 :"),n.qZA()(),n.TgZ(45,"ion-text"),n._uU(46),n.qZA()()()()()(),n.YNc(47,E,24,8,"ion-row",4),n.ALo(48,"async"),n.TgZ(49,"ion-row",30),n._UZ(50,"ion-col",31),n.TgZ(51,"ion-col",31)(52,"ion-button",32),n.NdJ("click",function(){const u=n.CHM(t).$implicit,c=n.oxw(2);return n.KtG(c.mazdDetails(u))}),n.TgZ(53,"h5")(54,"b"),n._uU(55,"\u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644"),n.qZA()()()()()()()}if(2&i){const t=e.$implicit,o=e.index,r=n.oxw(2);n.xp6(4),n.Q6J("ngIf",1==t.currentStatus),n.xp6(1),n.Q6J("ngIf",3==t.currentStatus),n.xp6(1),n.Q6J("ngIf",2==t.currentStatus),n.xp6(2),n.Oqu(t.title),n.xp6(3),n.Q6J("ngIf",t.userIn),n.xp6(1),n.Q6J("ngIf",t.userWin),n.xp6(1),n.Q6J("ngIf",t.userOut),n.xp6(1),n.Q6J("src",t.imgs[0],n.LSH),n.xp6(9),n.hij(" ",t.productPrice-.3*t.productPrice," "),n.xp6(7),n.hij(" ",t.deposit," "),n.xp6(4),n.hij(" ",n.gM2(35,14,t.start,"EEE dd-MM-yyyy",void 0,"ar")," "),n.xp6(4),n.Oqu(n.gM2(39,19,t.start,"hh:mm a",void 0,"ar")),n.xp6(8),n.hij(" ",t.duration," "),n.xp6(1),n.Q6J("ngIf",n.lcZ(48,24,r.auctionsArray[o].timeLeft))}}function z(i,e){if(1&i&&(n.TgZ(0,"ion-grid")(1,"ion-row",14),n.YNc(2,Q,56,26,"ion-col",15),n.qZA()()),2&i){const t=n.oxw();n.xp6(2),n.Q6J("ngForOf",t.auctionsArray)}}const L=[{path:"",component:(()=>{class i{constructor(t,o,r,u,c){this.storage=t,this.api=o,this.datePipe=r,this.rout=u,this.socket=c,this.errorLoad=!1,this.timeLeftArr=[{da:String,hr:String,mn:String,sc:String}],this.auctionsArray=void 0,this.slideOpts={slidesPerView:3,nitialSlide:0}}ngOnInit(){this.storage.get("user_info").then(t=>{t&&(this.USER_INFO=t.user,this.getAllAuction())})}ionViewWillEnter(){}reload(){this.errorLoad=!1,this.auctionsArray=void 0,this.getAllAuction()}getAllAuction(){this.api.getUserAuction(this.USER_INFO._id).subscribe(t=>{this.auctionsArray=t.auctions,this.prepareAuc()},t=>{this.errorLoad=!0})}prepareAuc(){for(let t=0;t<this.auctionsArray.length;t++){const o=this.auctionsArray[t];let r;if(1==o.currentStatus?o.timeLeft=this.startAfterounter(t):2==o.currentStatus?o.timeLeft=this.endAfterounter(t):3==o.currentStatus&&(o.timeLeft=this.endSinceAfterounter(t)),r=o.users,o.currentStatus<3&&0==r.cancel)o.userIn=!0;else if(1==r.cancel)o.userOut=!0;else if(3==o.currentStatus){let k=o.logs.reduce((_,A)=>_>A.pay?_:A.pay,0);o.logs.filter(_=>_.pay==k)[0].userId==this.USER_INFO._id&&(o.userWin=!0)}let u=a.duration(a(o.end).diff(a(o.start))),c="",h="",Z="";u.days()>0&&(h=u.days().toString()+" \u064a\u0648\u0645"),u.hours()>0&&(c=u.hours().toString()+" \u0633\u0627\u0639\u0629"),u.hours()>0&&u.hours()>0&&(Z=" , "),o.duration=h+Z+c}}endAfterounter(t){m().utcOffset();let r=a(this.auctionsArray[t].end).add();return new f.y(u=>{setInterval(()=>u.next({da:this.memntoEnd(r).asDays().toFixed(0).toString(),hr:this.memntoEnd(r).hours().toString(),mn:this.memntoEnd(r).minutes().toString(),sc:this.memntoEnd(r).seconds().toString()}),1e3)})}memntoEnd(t){return a.duration(a(t).diff(a()))}startAfterounter(t){m().utcOffset();let r=a(this.auctionsArray[t].start).add();return new f.y(u=>{setInterval(()=>u.next({da:this.memntoStart(r).asDays().toFixed(0).toString(),hr:this.memntoStart(r).hours().toString(),mn:this.memntoStart(r).minutes().toString(),sc:this.memntoStart(r).seconds().toString()}),1e3)})}memntoStart(t){let o=new Date;return a.duration(a(t).diff(a(o)))}endSinceAfterounter(t){m().utcOffset();let r=a(this.auctionsArray[t].end).add();return new f.y(u=>{setInterval(()=>u.next({da:this.memnSinceEnd(r).asDays().toFixed(0).toString(),hr:this.memnSinceEnd(r).hours().toString(),mn:this.memnSinceEnd(r).minutes().toString(),sc:this.memnSinceEnd(r).seconds().toString()}),1e3)})}memnSinceEnd(t){return a.duration(a().diff(a(t)))}mazdDetails(t){let o={queryParams:{id:JSON.stringify(t._id),user_info:JSON.stringify(this.USER_INFO)}};this.rout.navigate(1==t.userIn&&2==t.currentStatus?["live-mzad"]:1==t.userWin?["oreder-details"]:["mazad-details"],o)}}return i.\u0275fac=function(t){return new(t||i)(n.Y36(b.K),n.Y36(x.D),n.Y36(s.uU),n.Y36(l.F0),n.Y36(x.D))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-my-bidding"]],decls:11,vars:3,consts:[["dir","rtl"],["name","hand-right-outline"],[1,"ion-margin-top","ion-justify-content-center"],["class","custGrid",4,"ngIf"],[4,"ngIf"],[1,"custGrid"],[1,"ion-no-margin","ion-no-padding","ion-justify-content-center","w100"],["size","12",1,"ion-text-center"],["size","6",1,"ion-text-center"],["expand","block",3,"click"],["name","refresh","color","light","slot","end"],[1,"ion-no-margin","ion-no-padding","w100"],["name","lines","color","dark","mode","ios"],["size","12"],[1,"ion-padding"],["size","12","class","radus5 borderlight w100 mgt10",4,"ngFor","ngForOf"],["size","12",1,"radus5","borderlight","w100","mgt10"],["dir","rtl",1,"ion-no-padding"],["lines","none",1,"w100"],["color","warning","slot","end","class","badge",4,"ngIf"],["color","light","slot","end","class","badge",4,"ngIf"],["color","success","slot","end","class","badge",4,"ngIf"],["size","6",1,"pos"],["class","Status",4,"ngIf"],[1,"radus5","img",3,"src"],["size","6"],[1,"mgt10","ion-justify-content-center"],["color","primary"],["dir","rtl",1,"ion-text-center","padding5"],["color","medium"],["dir","rtl",1,"ion-margin-top"],["size","4"],["expand","block","color","dark",3,"click"],["color","warning","slot","end",1,"badge"],["slot","end","name","ellipse","color","danger"],["color","light","slot","end",1,"badge"],["color","success","slot","end",1,"badge"],[1,"Status"],["color","light"],["color","success","name","ribbon-outline"],["name","ribbon-outline","color","warning"],["name","ribbon-outline","color","danger"],["size","6",1,"timercol"],[1,"htext"],[1,"hnom"]],template:function(t,o){1&t&&(n.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),n._UZ(3,"ion-icon",1),n._uU(4," \u0645\u0632\u0627\u062f\u0627\u062a\u064a "),n.qZA()()(),n.TgZ(5,"ion-content")(6,"ion-grid"),n._UZ(7,"ion-row",2),n.qZA(),n.YNc(8,T,10,0,"ion-grid",3),n.YNc(9,S,5,0,"ion-grid",3),n.YNc(10,z,3,1,"ion-grid",4),n.qZA()),2&t&&(n.xp6(8),n.Q6J("ngIf",1==o.errorLoad),n.xp6(1),n.Q6J("ngIf",!o.auctionsArray&&0==o.errorLoad),n.xp6(1),n.Q6J("ngIf",o.auctionsArray))},dependencies:[s.sg,s.O5,d.yp,d.YG,d.wI,d.W2,d.jY,d.Gu,d.gu,d.Ie,d.Q$,d.Nd,d.PQ,d.yW,d.wd,d.sr,s.Ov,s.uU],styles:[".custGrid[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.header-md[_ngcontent-%COMP%]:after{background-image:none}.radus5[_ngcontent-%COMP%]{border-radius:4%}.borderlight[_ngcontent-%COMP%]{border-style:solid;border-width:.5px;border-color:var(--ion-color-light-shade)}.badge[_ngcontent-%COMP%]{padding:4px 13px 5px 14px}.mgt10[_ngcontent-%COMP%]{margin-top:10px}.padding5[_ngcontent-%COMP%]{padding-top:5px}--ion-padding[_ngcontent-%COMP%]{padding-left:unset;padding-right:unset;padding-inline-start:var(--ion-padding, 9px);padding-inline-end:var(--ion-padding, 9px)}.timercol[_ngcontent-%COMP%]{background-color:var(--ion-color-light-tint);border-bottom-left-radius:9px;border-bottom-right-radius:9px}.htext[_ngcontent-%COMP%]{text-align:center;margin-top:3px;margin-bottom:1px}.hnom[_ngcontent-%COMP%]{text-align:center;margin-top:1px}.img[_ngcontent-%COMP%]{height:135px;width:153px}.Status[_ngcontent-%COMP%]{position:absolute;float:right;right:3px;top:3px}.pos[_ngcontent-%COMP%]{position:relative}"]}),i})()}];let j=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[l.Bz.forChild(L),l.Bz]}),i})(),D=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[s.ez,y.u5,d.Pc,j]}),i})()}}]);