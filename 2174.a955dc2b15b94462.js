"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2174],{2174:(Q,d,r)=>{r.r(d),r.d(d,{WalletPageModule:()=>k});var c=r(6895),h=r(4006),i=r(3497),u=r(2485),g=r(5861),m=r(499),n=r(6738),_=r(4338),Z=r(849);function A(e,a){if(1&e&&(n.TgZ(0,"h2")(1,"b"),n._uU(2),n.qZA(),n.TgZ(3,"ion-text"),n._uU(4,"\xa0 usd"),n.qZA()()),2&e){const o=n.oxw();n.xp6(2),n.Oqu(o.walletBalance)}}function T(e,a){1&e&&(n.TgZ(0,"h2"),n._UZ(1,"ion-spinner",12),n.qZA())}function b(e,a){if(1&e){const o=n.EpF();n.TgZ(0,"ion-grid",13)(1,"ion-row",14)(2,"ion-col",15)(3,"h3"),n._uU(4,"\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644"),n.qZA()(),n.TgZ(5,"ion-col",16)(6,"ion-button",17),n.NdJ("click",function(){n.CHM(o);const l=n.oxw();return n.KtG(l.reload())}),n.TgZ(7,"h5"),n._uU(8,"\u062a\u062d\u062f\u064a\u062b"),n.qZA(),n._UZ(9,"ion-icon",18),n.qZA()()()()}}function x(e,a){1&e&&(n.TgZ(0,"ion-grid",13)(1,"ion-row",19)(2,"ion-col",15),n._UZ(3,"ion-spinner",20),n.qZA(),n._UZ(4,"ion-col",21),n.qZA()())}function w(e,a){1&e&&(n.TgZ(0,"ion-row",25)(1,"ion-col",21)(2,"div",26),n._UZ(3,"ion-icon",27),n.qZA()(),n.TgZ(4,"ion-col",21)(5,"div",26)(6,"h2",28),n._uU(7," \u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0639\u0627\u0645\u0644\u0627\u062a \u0645\u0627\u0644\u064a\u0629 "),n.qZA()()()())}function U(e,a){1&e&&n._UZ(0,"ion-icon",43)}function P(e,a){1&e&&n._UZ(0,"ion-icon",44)}function y(e,a){if(1&e&&(n.TgZ(0,"ion-badge",45)(1,"b"),n._uU(2),n.qZA(),n.TgZ(3,"ion-text"),n._uU(4," usd"),n.qZA()()),2&e){const o=n.oxw().$implicit;n.xp6(2),n.hij("-",o.pay,"")}}function W(e,a){if(1&e&&(n.TgZ(0,"ion-badge",46)(1,"b"),n._uU(2),n.qZA(),n.TgZ(3,"ion-text"),n._uU(4," usd"),n.qZA()()),2&e){const o=n.oxw().$implicit;n.xp6(2),n.Oqu(o.pay)}}function q(e,a){1&e&&(n.TgZ(0,"ion-label"),n._uU(1,"\u0633\u062d\u0628"),n.qZA())}function I(e,a){1&e&&(n.TgZ(0,"ion-label"),n._uU(1,"\u0627\u064a\u062f\u0627\u0639"),n.qZA())}function C(e,a){if(1&e&&(n.TgZ(0,"ion-accordion",33)(1,"ion-item",34),n.YNc(2,U,1,0,"ion-icon",35),n.YNc(3,P,1,0,"ion-icon",36),n.TgZ(4,"ion-label"),n._uU(5),n.qZA(),n.YNc(6,y,5,1,"ion-badge",37),n.YNc(7,W,5,1,"ion-badge",38),n.qZA(),n.TgZ(8,"div",39)(9,"ion-grid")(10,"ion-row",40)(11,"ion-col",41),n._uU(12,"\u0631\u0642\u0645 \u0627\u0644\u0639\u0645\u0644\u064a\u0629:"),n.qZA(),n.TgZ(13,"ion-col",42),n._uU(14),n.qZA()(),n.TgZ(15,"ion-row",40)(16,"ion-col",41),n._uU(17,"\u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644:"),n.qZA(),n.TgZ(18,"ion-col",42),n._uU(19),n.qZA()(),n.TgZ(20,"ion-row",40)(21,"ion-col",41),n._uU(22,"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"),n.qZA(),n.TgZ(23,"ion-col",42),n._uU(24),n.ALo(25,"date"),n.qZA()(),n.TgZ(26,"ion-row",40)(27,"ion-col",41),n._uU(28,"\u0646\u0648\u0639 \u0627\u0644\u0639\u0645\u0644\u064a\u0629"),n.qZA(),n.TgZ(29,"ion-col",42),n.YNc(30,q,2,0,"ion-label",6),n.YNc(31,I,2,0,"ion-label",6),n.qZA()(),n.TgZ(32,"ion-row",40)(33,"ion-col",41)(34,"ion-label"),n._uU(35,"\u0627\u0644\u0645\u0628\u0644\u063a"),n.qZA()(),n.TgZ(36,"ion-col",42)(37,"ion-label"),n._uU(38),n.qZA()()(),n.TgZ(39,"ion-row",40)(40,"ion-col",41)(41,"ion-label"),n._uU(42," \u0648\u0633\u064a\u0644\u0629 \u0627\u0644\u062f\u0641\u0639 "),n.qZA()(),n.TgZ(43,"ion-col",42)(44,"ion-label")(45,"ion-text"),n._uU(46),n.qZA()()()()()()()),2&e){const o=a.$implicit;n.Q6J("value",a.index),n.xp6(2),n.Q6J("ngIf",1==o.typee),n.xp6(1),n.Q6J("ngIf",2==o.typee),n.xp6(2),n.hij(" ",o.details,""),n.xp6(1),n.Q6J("ngIf",1==o.typee),n.xp6(1),n.Q6J("ngIf",2==o.typee),n.xp6(7),n.Oqu(o.refNo),n.xp6(5),n.Oqu(o.details),n.xp6(5),n.Oqu(n.gM2(25,13,o.createdAt,"EEE dd-MM-yyyy hh:mm a",void 0,"ar")),n.xp6(6),n.Q6J("ngIf",1==o.typee),n.xp6(1),n.Q6J("ngIf",2==o.typee),n.xp6(7),n.hij("",o.pay," \xa0 usd"),n.xp6(8),n.hij("",o.paymentMethod," ")}}function O(e,a){if(1&e&&(n.TgZ(0,"ion-row",29)(1,"ion-card",30)(2,"ion-list")(3,"ion-item",30),n._UZ(4,"ion-icon",31),n.TgZ(5,"ion-label"),n._uU(6,"\u0645\u0639\u0627\u0645\u0644\u0627\u062a \u062d\u062f\u064a\u062b\u0629 "),n.qZA()(),n.TgZ(7,"ion-accordion-group"),n.YNc(8,C,47,18,"ion-accordion",32),n.qZA()()()()),2&e){const o=n.oxw(2);n.xp6(8),n.Q6J("ngForOf",o.transactions)}}function v(e,a){if(1&e&&(n.TgZ(0,"ion-grid",22),n.YNc(1,w,8,0,"ion-row",23),n.YNc(2,O,9,1,"ion-row",24),n.qZA()),2&e){const o=n.oxw();n.xp6(1),n.Q6J("ngIf",0==o.transactions.length),n.xp6(1),n.Q6J("ngIf",o.transactions.length>0)}}const M=[{path:"",component:(()=>{class e{constructor(o,t,l,s,f,N,B,D,F,J,L){this.alertController=o,this.api=t,this.socket=l,this.route=s,this.storage=f,this.loadingController=N,this.toast=B,this.actionSheetCtl=D,this.datePipe=F,this.rout=J,this.modalController=L,this.errorLoadBalance=!1,this.zeroBalance=!1,this.errorLoad=!1,this.balanceLoding=!1,this.showEmpty=!1,this.showSkelton=!1,this.transactions=void 0,this.walletBalance=void 0,this.storage.get("user_info").then(p=>{p&&(this.USER_INFO=p.user,console.log("kkkkkkkkkk",this.USER_INFO),this.getWalletBalance())})}getWalletBalance(){this.api.getBalance(this.USER_INFO._id).subscribe(o=>{console.log("balance",o),0==o.transaction.length?(this.zeroBalance=!0,this.walletBalance=0,this.transactions=[]):(this.walletBalance=+o.transaction[0].balance,this.getTransactions())},o=>{this.errorLoad=!0},()=>{})}getTransactions(){this.api.getAllTransaction(this.USER_INFO._id).subscribe(o=>{console.log("all trans",o),this.transactions=o.transaction},o=>{this.errorLoad=!0},()=>{})}getWalletBalanceAfterCharge(){this.balanceLoding=!0,this.api.getBalance(this.USER_INFO._id).subscribe(o=>{this.walletBalance=+o.transaction[0].balance,this.balanceLoding=!1,this.getTransactions()},o=>{this.errorLoad=!0,this.balanceLoding=!1},()=>{})}reload(){this.errorLoad=!1,this.errorLoadBalance=!1,this.transactions=void 0,this.walletBalance=void 0,this.getWalletBalance()}ngOnInit(){}presentLoadingWithOptions(o){var t=this;return(0,g.Z)(function*(){const l=yield t.loadingController.create({spinner:"bubbles",mode:"ios",duration:5e3,message:o,translucent:!0,backdropDismiss:!1});yield l.present(),yield l.onDidDismiss()})()}presentModal(o){var t=this;return(0,g.Z)(function*(){const l=yield t.modalController.create({component:m.H,componentProps:{USER_INFO:t.USER_INFO,amount:o,description:t.transactions,descriptionEn:t.transactions}});return l.onDidDismiss().then(s=>{null!==s&&t.doAfterDissmiss(s)}),yield l.present()})()}presentAlert(){var o=this;return(0,g.Z)(function*(){const t=yield o.alertController.create({header:"\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u0627\u0644\u0645\u0628\u0644\u063a",buttons:[{text:"\u0625\u0644\u063a\u0627\u0621",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}},{text:"\u0645\u0648\u0627\u0641\u0642",role:"ok",handler:l=>{console.log(l.amount)}}],inputs:[{name:"amount",type:"number",placeholder:"\u0627\u062f\u062e\u0644 \u0627\u0644\u0645\u0628\u0644\u063a \u0647\u0646\u0627",min:1,max:6}]});yield t.present(),t.onDidDismiss().then(l=>{null!==l&&(console.log("alert",l),o.doAfterDismissAlert(l.role,l.data.values.amount))})})()}doAfterDismissAlert(o,t){"ok"==o?this.presentModal(t):"cancel"==o||(this.presentToast("somthing went wron","danger"),console.log("dismiss"))}doAfterDissmiss(o){"done"==o.role&&this.getWalletBalanceAfterCharge()}presentToast(o,t){var l=this;return(0,g.Z)(function*(){(yield l.toast.create({message:o,duration:2e3,color:t,cssClass:"cust_Toast",mode:"ios",position:"top"})).present()})()}handleError(o){this.presentToast("\u062d\u062f\u062b \u062e\u0637\u0623 \u0645\u0627 \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0627\u062e\u0631\u064a","danger")}}return e.\u0275fac=function(o){return new(o||e)(n.Y36(i.Br),n.Y36(_.D),n.Y36(_.D),n.Y36(u.gz),n.Y36(Z.K),n.Y36(i.HT),n.Y36(i.yF),n.Y36(i.BX),n.Y36(c.uU),n.Y36(u.F0),n.Y36(i.IN))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-wallet"]],decls:23,vars:5,consts:[["dir","rtl"],["name","wallet-outline"],["dir","rtl",1,"bgtool"],["dir","rtl",1,"ion-margin-bottom","ion-margin-top"],["color","light",1,"ion-text-center"],["color","light"],[4,"ngIf"],["class","custGrid",4,"ngIf"],["class","ion-no-margin  ion-no-padding","dir","rtl",4,"ngIf"],["slot","fixed",1,"float",3,"click"],[1,"bg"],["name","add-circle","color","light",1,"f30"],["name","dots","color","light","mode","ios"],[1,"custGrid"],[1,"ion-no-margin","ion-no-padding","ion-justify-content-center","w100"],["size","12",1,"ion-text-center"],["size","6",1,"ion-text-center"],["expand","block",3,"click"],["name","refresh","color","light","slot","end"],[1,"ion-no-margin","ion-no-padding","w100"],["name","lines","color","dark","mode","ios"],["size","12"],["dir","rtl",1,"ion-no-margin","ion-no-padding"],["class","mgt50",4,"ngIf"],["class","ion-no-padding ",4,"ngIf"],[1,"mgt50"],[1,"w100","centerDiv"],["name","wallet-outline","color","dark",1,"f40"],[1,"f30"],[1,"ion-no-padding"],[1,"w100"],["name","receipt-outline","color","dark"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["slot","header","color","light"],["name","arrow-up-outline","color","danger",4,"ngIf"],["name","arrow-down-outline","color","success",4,"ngIf"],["slot","end","outline","true","color","danger",4,"ngIf"],["slot","end","outline","true","color","success",4,"ngIf"],["slot","content",1,"ion-padding"],[1,"ion-margin"],["size","3"],["size","9",1,"ion-text-end"],["name","arrow-up-outline","color","danger"],["name","arrow-down-outline","color","success"],["slot","end","outline","true","color","danger"],["slot","end","outline","true","color","success"]],template:function(o,t){1&o&&(n.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),n._UZ(3,"ion-icon",1),n._uU(4," \u0627\u0644\u0645\u062d\u0641\u0638\u0629"),n.qZA()()(),n.TgZ(5,"ion-content")(6,"ion-header",2)(7,"ion-toolbar",3)(8,"ion-title",4)(9,"h2",5)(10,"b"),n._uU(11,"\u0627\u0644\u0631\u0635\u064a\u0640\u0640\u062f"),n.qZA()()(),n.TgZ(12,"ion-title",4),n.YNc(13,A,5,1,"h2",6),n.YNc(14,T,2,0,"h2",6),n.qZA()()(),n.YNc(15,b,10,0,"ion-grid",7),n.YNc(16,x,5,0,"ion-grid",7),n.YNc(17,v,3,2,"ion-grid",8),n.TgZ(18,"ion-fab",9),n.NdJ("click",function(){return t.presentAlert()}),n.TgZ(19,"ion-chip",10)(20,"ion-label",5),n._uU(21,"\u0634\u062d\u0646 \u0627\u0644\u0645\u062d\u0641\u0638\u0629"),n.qZA(),n._UZ(22,"ion-icon",11),n.qZA()()()),2&o&&(n.xp6(13),n.Q6J("ngIf",0==t.balanceLoding),n.xp6(1),n.Q6J("ngIf",1==t.balanceLoding),n.xp6(1),n.Q6J("ngIf",1==t.errorLoad),n.xp6(1),n.Q6J("ngIf",!t.transactions&&0==t.errorLoad),n.xp6(1),n.Q6J("ngIf",t.transactions))},dependencies:[c.sg,c.O5,i.We,i.eh,i.yp,i.YG,i.PM,i.hM,i.wI,i.W2,i.IJ,i.jY,i.Gu,i.gu,i.Ie,i.Q$,i.q_,i.Nd,i.PQ,i.yW,i.wd,i.sr,c.uU],styles:[".header-md[_ngcontent-%COMP%]:after{background-image:none}.centerDiv[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.custGrid[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.f30[_ngcontent-%COMP%]{font-size:30px}.f40[_ngcontent-%COMP%]{font-size:40px}.ico[_ngcontent-%COMP%]{font-size:30px}.mgt50[_ngcontent-%COMP%]{margin-top:50%}.float[_ngcontent-%COMP%]{position:fixed;bottom:5%;right:3%}.bg[_ngcontent-%COMP%]{background-color:var(--ion-color-dark)}.bgtool[_ngcontent-%COMP%]{background-image:url(bgtoolbar2.dc8b33d6a4a95100.png);background-blend-mode:soft-light;background-color:var(--ion-color-primary-tint)}ion-toolbar[_ngcontent-%COMP%]{--opacity:0 }"]}),e})()}];let Y=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[u.Bz.forChild(M),u.Bz]}),e})(),k=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[c.ez,h.u5,i.Pc,Y]}),e})()}}]);